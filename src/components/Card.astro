---
import type {ImageMetadata} from 'astro';
import {Image} from 'astro:assets';

interface Props {
    image: string;
    alt: string;
    href?: string;
}

const {image, alt = '', href = ''} = Astro.props as Props;
const imagePath = "/public" + image;
const images = import.meta.glob<{ default: ImageMetadata }>('/public/admin/uploads/*.{jpeg,jpg,png,gif,webp}')
if (!images[imagePath])
    throw new Error(`"${imagePath}" does not exist in: "src/assets/images*.{jpeg,jpg,png,gif,webp}"`);
---
<div class="ce_text grid1 block">
  <figure class="image_container float_above">
      {href.trim() !== '' ? (<a href={href} title={alt}>
          <Image src={images[imagePath]()} alt={alt} title={alt} width={300} loading="lazy"/>
        </a>)
          : (
          <Image src={images[imagePath]()} alt={alt} title={alt} width={300} loading="lazy"/>)
      }
  </figure>
  <slot/>
</div>